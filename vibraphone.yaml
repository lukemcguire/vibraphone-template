# vibraphone.yaml â€” Project Genome
# Note: The components section below is a placeholder.
# Run configure_stack after project planning to generate
# per-component Justfile recipes and update this config.

project:
  name: "my-app"
  version: "0.1.0"

components:
  app:
    language: python
    root: ./src
    test_command: "pytest --tb=short"
    lint_command: "ruff check . && ruff format --check ."
    format_command: "ruff check --fix . && ruff format ."
    coverage_threshold: 80

quality_gate:
  require_tests: true
  require_lint: true
  require_review: true
  review_severity_threshold: error # "error" = only errors block | "warning" = warnings also block
  max_test_attempts: 5 # Circuit breaker for stuck tests
  max_review_attempts: 3 # Circuit breaker for review loops

worktree:
  base_branch: main
  prefix: feat/
  auto_cleanup: false

review:
  model: minimax/minimax-m2.5
  prompt_file: ./docs/prompts/reviewer.md
  constitution_file: ./docs/CONSTITUTION.md

beads:
  use_bv: false # Enable bv --robot-triage for graph-aware task prioritization
  auto_sync: true # Auto-run br sync --flush-only after task state changes

stitch:
  enabled: false # Enable Google Stitch MCP for UI generation
  project_id: ${STITCH_PROJECT_ID} # Resolved from .env
